




{% include 'header.html' %}
{% load static %}



<link href="https://fonts.googleapis.com/css?family=Nunito:200,600" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" >
    <link rel="stylesheet" href="css/mystyle.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css">
<script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.19.1/dist/bootstrap-table.min.js"></script>
<script src="https://unpkg.com/bootstrap-table@1.19.1/dist/extensions/export/bootstrap-table-export.min.js"></script>


<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-html5-1.6.1/b-print-1.6.1/r-2.2.3/datatables.min.css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs4/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-html5-1.6.1/b-print-1.6.1/r-2.2.3/datatables.min.js"></script>
<style>
    .mt-100 {
}
.card-header {
            padding: 0.2rem 1.25rem;
            /* margin-bottom: 0; */
            background-color: #ffffff;
            border-bottom: 0px;
        }
        
        .card-body {
            padding: 0rem 1.25rem;
        }
        
        p {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .card {
            border-radius: 0px;
            padding-top: 15px;
            padding-bottom: 15px;
        }
        
        .flex-wrap {
            margin-bottom: -35px;
        }
        
        div.dataTables_wrapper div.dataTables_paginate {
            margin-top: -25px;
        }
        
        .page-item.active .page-link {
            z-index: 1;
            color: #fff;
            background-color: #5D78FF;
            border-color: #5D78FF;
        }

</style>


<form method="get" target="_blank">
    
    <select name="selected_user">
        <option value="">Select User</option>
        {% for us in searching_users %}
        <option value="{{us.user_id}}">{{us.name}}</option>
        
        {% endfor %}
    </select>
    <select name="type" required>
        <option value="">Type</option>
        <option value="from">From</option>
        <option value="to">To</option>
    </select>
    <select name="status">
        <option value="">Select Status</option>
        {% for sf in status_field  %}
            <option value="{{sf.id}}">{{sf}}</option>
        {% endfor %}
    </select>
    <input type="date" name="from">
        <input type="date" name="to">
    <button type="submit">Search</button>
</form>

<form method="post" id="assign_form">
    {% csrf_token %}
    <input type="hidden" value="{{selected_user}}" name="selected_user">
    <input type="hidden" value="{{filter_from}}" name="filter_from">
    <input type="hidden" value="{{filter_to}}" name="filter_to">
    <input type="hidden" value="{{filter_status}}" name="filter_status">
    <input type="hidden" value="{{filter_type}}" name="filter_type">
    
    




    <div class="app-chat-container">
                        <div class="row m-0 h-100">
                            <div class="col d-flex flex-column p-0 h-100" data-perfect-scrollbar>

                                <div class="container page__container">


                                    <div class="row card-group-row">

                                    </div>
                                    
                                    

                                    <div class="card">
                                        
                                        
                                        
                                        <div class="card-header bg-white d-flex align-items-center">
                                            <h4 class="card-header__title flex m-0">Forwarded Company [{{count}}]</h4>
                                            
<!--                                            <div data-toggle="flatpickr" data-flatpickr-wrap="true" data-flatpickr-static="true" data-flatpickr-mode="range" data-flatpickr-alt-format="d/m/Y" data-flatpickr-date-format="d/m/Y">-->
<!--                                                <a href="javascript:void(0)" class="link-date" data-toggle>13/03/2018 <span class="text-muted mx-1">to</span> 20/03/2018</a>-->
<!--                                                <input class="flatpickr-hidden-input" type="hidden" value="13/03/2018 to 20/03/2018" data-input>-->
<!--                                            </div>-->
                                        </div>
                                        <table class="table table-bordered table-hover" id="table_id">
                                            <thead>
                                                <tr>
                                                    <th>Comapny Name</th>
                                                    <th>State</th>
                                                    <th>City</th>
                                                    <th>Budget</th>
                                                    <th>Website</th>
                                                    <th>contactperson</th>
                                                    <th>designation</th>
                                                    <th>emailid</th>
                                                    <th>phoneno</th>
                                                    <th>Status</th>
                                                    <th>Remark</th>
                                                    <th>Updated Date</th>
                                                    <th>Assigned From</th>
                                                    <th>Assigned To</th>
                                                </tr>
                                            </thead>
                                            <tbody id="myTable">
                                        {% for lg in data %}
                                            <tr style="cursor:pointer;" >
                                                <td>{{lg.compname}}</td>
                                                <td>{{lg.state}}</td>
                                                <td>{{lg.city}}</td>
                                                <td>{{lg.budget}}</td>
                                                <td>{{lg.website}}</td>
                                                <td>{{lg.contactperson}}</td>
                                                <td>{{lg.designation}}</td>
                                                <td>{{lg.emailid}}</td>
                                                <td>{{lg.phoneno}}</td>
                                                <td>{{lg.status}}</td>
                                                <td>{{lg.remarks}}</td>
                                                <td>{{lg.fwd_date}}</td>
                                                <td>{{lg.name}}</td>
                                                <td>{{lg.assignedto}}</td>

                                            </tr>
                                        {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>



                            </div>

                        </div>
                    </div>


<!-- The Modal -->
<div class="modal" id="assignModal" style="display:none;position:fixed;overflow:scroll">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">


        <button type="button" class="close" onclick="return hide_assign_person();">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
          <input type="hidden" name="assigned_to" id="assigned_to">

          <ul style="list-style:none;">
              {% for us in users %}
                <li><input type="radio" onchange="return submit_form(this.value);" name="assign_to" value="{{us.user_id}}">&nbsp;<b>{{us.name}}</b><hr style="height:1px;"></li>
              {% endfor %}
              {% if request.user.is_staff %}
              <li><input type="radio" onchange="return submit_form(this.value);" name="assign_to" value="54">&nbsp;<b>Unnikrishnan Nair</b><hr style="height:1px;"></li>
              {% endif %}
          </ul>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">

      </div>

    </div>
  </div>
</div>
<div class="modal" id="notesModal" style="display:none;position:fixed;overflow:scroll">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">


        <button type="button" class="close" onclick="$('#notesModal').hide();">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
          <legend>Remarks</legend>
          <textarea  name="assigned_notes" id="assigned_notes" rows="5" placeholder="Remarks" class="form-control" ></textarea>
          
          <br>
          <button class="btn btn-primary" type="button" onclick="return assign_person();">
              Continue >>>
          </button>

          

      </div>
      
      
      
      
      
      

      <!-- Modal footer -->
      <div class="modal-footer">

      </div>

    </div>
  </div>
</div>
</form>

<script>
     $(document).ready(function() {
            $('#table_id').DataTable({

                dom: 'Bfrtip',
                responsive: true,
                pageLength: 25,
                // lengthMenu: [0, 5, 10, 20, 50, 100, 200, 500],

                buttons: [
                    'copy', 'csv', 'excel', 'pdf', 'print'
                ]

            });
        });

</script>



{% include 'footer.html' %}